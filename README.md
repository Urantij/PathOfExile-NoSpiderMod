# Path Of Exile No Spider Mod

Программа для модификации файлов игры, заменяющая пауков и похожих противников на бочки и коробки.

![Screenshot from 2023-04-11 20-36-46](https://user-images.githubusercontent.com/19665286/232219501-35e03848-60c4-4595-ae03-e978a87b676c.png)

Заменяются пауки, большие крабы (Как в начале первого акта), а также тараканы.

## Использование

Стим версия не поддерживается.
Для работы необходим файл Content.ggpk, которые есть только в отдельном лаунчере.

Также для работы программы необходима библиотека `oo2core.dll`
Она платная, и я не могу её распространять, но есть вероятность, что её можно найти в сети интернет.

Программа принимает аргументы `-p` и `-r`
После аргумента `-p` должен быть путь до `Content.ggpk` файла. Пробелы должны быть экранированы обратным слешем.

`dotnet PathOfExile-NoSpiderMod.dll -p C:/Program\ Files/.../Content.ggpk`

По умолчанию программа не делает замены, а только проверяет, есть ли необработанные противники в файлах игры.
Чтобы запустить обработку, нужно добавить аргумент `-r`.

После каждого обновления игры есть шанс, что файлы частично или целиком починятся, поэтому рекомендуется делать проверку после запуска лаунчера.
В ярлык игры можно добавить аргумент `--nopatch`, чтобы обновления не было. Я не знаю, что там произойдёт.
Главное, чтобы было понятно, обновлялась игра или нет.

Также из игры удаляется человек, открывающий дверь после убийства Хиллока. Если его нет, и нет его озвучки, программа работает.

Если всё пойдёт не по плану, в файлах игры есть `PackCheck.exe`, который должен исправить содержимое `Content.ggpk`

Если есть вопросы, можете написать в дискорд или на почту, контакты есть в моём профиле.

Крабы это ящики. Все остальные - бочки.

## Как

Большая часть работы была сделана очень давно методом проб и ошибок, поэтому я не могу объяснить, почему делаются определённые действия.
Всё делается так, потому что иначе игра вылетала.

Работа идёт в два этапа.

Обработка aoc файлов. В этих файлах есть информация о мешах противника. Эта информация удаляется, в итоге противник становится невидимым.

После чего обрабатываются otc файлы. В этих файлах находятся скрипты противника.
Добавляются 2 метода, один прикрепляет к противнику бочку, когда он спавнится, второй убирает бочку при смерти.

Но некоторые пауки называются не Spider, а, например, RazorLeg.
Поэтому программа также смотрит на пути скинов противников, потому что скин в любом случае называется Spider.

## Линукс

Я не смог заставить программу работать через wine, но у меня получилось пропатчить игру, запустив программу на виртуалке, и указав путь через Shared Folders.

## Кредиты

Эта программа возможна только благодаря авторам этой библиотеки

https://github.com/aianlinb/LibGGPK3
